"use strict";(self.webpackChunkgp_project=self.webpackChunkgp_project||[]).push([[968],{6115:function(e,s,t){t.r(s),t.d(s,{default:function(){return ue}});var n=t(1413),r=t(5671),i=t(3144),o=t(136),a=t(8557),l=t(2791),c={main_pic_wrapper:"Profile_main_pic_wrapper__M8QZv",main_pic:"Profile_main_pic__O5xQd"},u=t(885),d=t(4146),f="ProfileInfo_avatar_description__Eseoy",p="ProfileInfo_avatar__k6rxD",h="ProfileInfo_avatarPhoto__sLRGm",x="ProfileInfo_inputFileText__5FN6z",j="ProfileInfo_inputFile__QsQ58",m="ProfileInfo_inputFileBtn__ay6+l",_="ProfileInfo_UserStatus__EgriX",v="ProfileInfo_active__flGnd",g="ProfileInfo_buttonSave__hobEo",b="ProfileInfo_description__R9+KZ",P="ProfileInfo_contacts__BGo2a",N="ProfileInfo_user_name__nsFBX",k="ProfileInfo_lookingForAJob__Dss2P",Z="ProfileInfo_lookingForAJobText__gjE-p",I="ProfileInfo_false__HTamB",y="ProfileInfo_status__twCKs",S=t.p+"static/media/jobLooker.5222b7e3bc2bd1032175.webp",F=t(5896),C=t(184),w=function(e){var s=(0,l.useState)(!1),t=(0,u.Z)(s,2),n=t[0],r=t[1],i=(0,l.useState)(e.status),o=(0,u.Z)(i,2),a=o[0],c=o[1];(0,l.useEffect)((function(){c(e.status)}),[e.status]);return(0,C.jsxs)("div",{children:[!n&&(0,C.jsx)("div",{className:_+" "+v,children:(0,C.jsx)("span",{onDoubleClick:function(){r(!0)},children:e.status||"No status"})}),n&&(0,C.jsxs)("div",{children:[(0,C.jsx)("textarea",{className:_,onChange:function(e){c(e.currentTarget.value)},autoFocus:!0,value:a}),(0,C.jsxs)("div",{className:y,children:[(0,C.jsxs)("button",{onClick:function(){r(!1)},children:["Cancel ",(0,C.jsx)("i",{children:"\u293a"})]}),(0,C.jsxs)("button",{onClick:function(){r(!1),e.updateUserStatus(a)},children:["Save ",(0,C.jsx)("i",{children:"\u27bd"})]})]})]})]})},D=t(9234),U=t(704),A=t(1117),M=t(4193),T=t(1720),E=(0,U.Z)({form:"edit-profile",enableReinitialize:!0,destroyOnUnmount:!1,keepDirtyOnReinitialize:!0})((function(e){var s=e.handleSubmit,t=e.error,n=e.profile;return(0,C.jsxs)("form",{className:b,onSubmit:s,children:[(0,C.jsx)("h1",{children:"Profile Edit Mode"}),(0,C.jsx)("div",{className:g,children:(0,C.jsx)("button",{children:"Save"})}),t&&(0,C.jsxs)("div",{className:D.Z.formError,children:[(0,C.jsx)("img",{className:D.Z.errorSignPic,src:T,alt:""}),(0,C.jsxs)("span",{className:D.Z.errorSpan,children:[" ",t," "]})]}),(0,C.jsxs)("div",{className:N,children:[(0,C.jsx)("b",{}),(0,A.Gr)(t,"fullName","Full name:",A.II,"text","Fill your Full Name","",[M.C1],"",null)]}),(0,A.Gr)(t,"aboutMe","About me:",A.II,"text","Describe yourself","",[M.C1],"",null),(0,C.jsxs)("div",{children:[(0,C.jsxs)("div",{className:Z,children:[" ",(0,C.jsx)("b",{children:"Looking for a job:"}),(0,A.Gr)(null,"lookingForAJob","","input","checkbox","","",[],"",null)]}),(0,A.Gr)(t,"lookingForAJobDescription","My professional skills:",A.II,"text","Describe your professional skills ","",[],"",null)]}),(0,C.jsx)("br",{}),(0,C.jsxs)("div",{className:P,children:[(0,C.jsx)("b",{children:"Contacts:"}),(0,C.jsx)("ul",{children:Object.keys(n.contacts).map((function(e){return(0,C.jsxs)("li",{children:[(0,C.jsxs)("b",{children:[e,":"]}),"  ",(0,A.Gr)(t,"contacts."+e,"",A.II,"text","Fill your ".concat(e," URL"),"",[],"",null)]},e)}))})]})]})})),O=function(e){var s=e.profile,t=e.isOwner,n=e.goToEditMode;e.index;return(0,C.jsxs)("div",{className:b,children:[(0,C.jsx)("h1",{children:"Profile"}),(0,C.jsx)("br",{}),t&&(0,C.jsx)("div",{children:(0,C.jsx)("button",{onClick:n,children:"Edit profile"})}),(0,C.jsxs)("p",{className:N,children:[(0,C.jsx)("b",{children:"Full name:"})," ",s.fullName]}),(0,C.jsxs)("p",{children:[(0,C.jsx)("b",{children:"About me:"}),"  ",s.aboutMe]}),(0,C.jsxs)("p",{children:[(0,C.jsx)("b",{children:"ID:"})," ",s.userId]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("img",{src:S,alt:"looking for a job",className:s.lookingForAJob?k:k+" "+I}),(0,C.jsxs)("p",{className:Z,children:[" ",(0,C.jsx)("b",{children:"Looking for a job:"}),s.lookingForAJob?" Yes":" No"]}),s.lookingForAJob&&(0,C.jsxs)("p",{children:[(0,C.jsx)("b",{children:"My professional skills:"}),"  ",s.lookingForAJobDescription]})]}),(0,C.jsx)("br",{}),(0,C.jsxs)("div",{className:P,children:[(0,C.jsx)("b",{children:"Contacts:"}),(0,C.jsxs)("ul",{children:[" ",Object.keys(s.contacts).map((function(e){return(0,C.jsx)(B,{keys:e,contactTitle:e,contactValue:s.contacts[e]})}))]})]})]})},B=function(e){var s=e.contactTitle,t=e.contactValue;return(0,C.jsx)("div",{children:t&&(0,C.jsxs)("li",{children:[(0,C.jsxs)("b",{children:[s,":"]})," ",t]})})},G=function(e){var s=e.profile,t=e.status,n=e.updateUserStatus,r=e.savePhoto,i=e.isOwner,o=e.saveProfile,a=(0,l.useState)(!1),c=(0,u.Z)(a,2),_=c[0],v=c[1],g=(0,l.useState)(),b=(0,u.Z)(g,2),P=b[0],N=b[1],k=(0,l.useState)(!1),Z=(0,u.Z)(k,2),I=Z[0],y=Z[1];if(!s)return(0,C.jsx)(d.Z,{});return(0,C.jsx)("div",{children:(0,C.jsxs)("div",{className:f,children:[(0,C.jsxs)("div",{className:p,children:[(0,C.jsx)("img",{src:s.photos.large?s.photos.large:F,onDoubleClick:function(){v(!0)},className:h,alt:"avatar"}),i&&_&&(0,C.jsxs)("div",{children:[(0,C.jsx)("span",{className:x,children:P?"Uploaded file: "+P:"Upload your photo"}),(0,C.jsxs)("label",{className:j,children:[(0,C.jsx)("input",{type:"file",onChange:function(e){e.target.files&&e.target.files.length&&(r(e.target.files[0]),N(e.target.files[0].name),console.log("uploading photo: ",P))},name:"file"}),(0,C.jsx)("span",{className:m,children:" Choose your file"})]})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("b",{children:"My status:"}),(0,C.jsx)(w,{status:t,updateUserStatus:n})]})]}),I?(0,C.jsx)(E,{initialValues:s,profile:s,onSubmit:function(e){o(e).then((function(){y(!1)}))}}):(0,C.jsx)(O,{profile:s,isOwner:i,goToEditMode:function(){y(!0)}})]})})},J=t(5197),Q=t(2982),R={postsBlock:"MyPosts_postsBlock__pWyfR",NewPost:"MyPosts_NewPost__0aFQe",addPostButton:"MyPosts_addPostButton__D3j18"},L=(0,M.DT)(300),q=(0,M.oQ)(2),z=(0,U.Z)({form:"ProfileAddNewPostForm"})((function(e){return(0,C.jsxs)("form",{onSubmit:e.handleSubmit,className:R.NewPost,children:[(0,A.Gr)(e.error,"newPostText","Add your post here:",A.gx,"text","Enter your post","",[M.C1,L,q],"",4),(0,C.jsx)("button",{className:R.addPostButton,children:"Add post"})]})})),K="Post_post__XZKbv",V="Post_user__mjSbQ",W="Post_Item__wH2jd",X="Post_underPost__q7JUj",$="Post_like__j+ro5",H=function(e){return(0,C.jsxs)("div",{className:K,children:[(0,C.jsxs)("div",{className:V,children:[(0,C.jsx)("img",{src:"https://cdn1.flamp.ru/1ade70d2f2f936f3ced673e84d129204.jpg",alt:""}),(0,C.jsxs)("span",{children:[e.Name,": "]})]}),(0,C.jsx)("div",{className:W,children:e.message}),(0,C.jsxs)("div",{className:X,children:["likes: ",e.likeCount,(0,C.jsx)("div",{className:$,children:(0,C.jsx)("img",{src:"https://pngicon.ru/file/uploads/like.png",alt:""})})]})]})},Y=function(e){var s=(0,Q.Z)(e.postData).reverse().map((function(e,s){return(0,C.jsx)(H,{message:e.message,likeCount:e.likeCount,Name:e.Name,id:e.id,postId:e.postId},s)}));return(0,C.jsxs)("div",{className:R.postsBlock,children:[(0,C.jsx)("h3",{children:"My posts"}),(0,C.jsx)(z,{onSubmit:function(s){return e.addPost(s.newPostText)}}),(0,C.jsx)("div",{className:R.posts,children:s})]})},ee=l.memo(Y),se=t(8687),te=(0,se.$j)((function(e){return{postData:e.profilePage.postData}}),{addPost:J.Nw.addPost})(ee),ne=t.p+"static/media/background.a601cbe8634fb53fea06.png",re=function(e){return(0,C.jsxs)("div",{className:c.profile,children:[(0,C.jsx)("div",{className:c.main_pic_wrapper,children:(0,C.jsx)("img",{className:c.main_pic,src:ne,alt:""})}),(0,C.jsx)(G,{profile:e.profile,status:e.status,updateUserStatus:e.updateUserStatus,savePhoto:e.savePhoto,isOwner:e.isOwner,saveProfile:e.saveProfile})," ",(0,C.jsx)(te,{})]})},ie=t(2932),oe=t(7781),ae=t(8880),le=t(6871);var ce=function(e){(0,o.Z)(t,e);var s=(0,a.Z)(t);function t(){return(0,r.Z)(this,t),s.apply(this,arguments)}return(0,i.Z)(t,[{key:"refreshProfile",value:function(){var e=+this.props.params.userId;e||(e=this.props.userId)||this.props.navigate("/login"),e?(this.props.getUserProfile(e),this.props.getUserStatus(e)):console.error("ID should exist in URI params or in state.auth.userId")}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,s,t){this.props.params.userId!==e.params.userId&&this.refreshProfile()}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return this.props.isFetching?(0,C.jsx)(d.Z,{message:"profile loading"}):(0,C.jsx)(re,(0,n.Z)((0,n.Z)({},this.props),{},{profile:this.props.profile,status:this.props.status,updateUserStatus:this.props.updateUserStatus,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile,isOwner:!this.props.params.userId}))}}]),t}(l.Component),ue=(0,oe.qC)((0,se.$j)((function(e){return{profile:e.profilePage.profile,isFetching:e.profilePage.isFetching,status:e.profilePage.status,userId:e.auth.userId}}),{getUserProfile:J.et,getUserStatus:J.Tq,updateUserStatus:J.OL,savePhoto:J.Ju,saveProfile:J.Ii}),ae.E,(function(e){return function(s){return(0,C.jsx)(e,(0,n.Z)((0,n.Z)({},s),{},{navigate:(0,le.s0)()}))}}),ie.D)(ce)},1117:function(e,s,t){t.d(s,{Gr:function(){return h},II:function(){return p},gx:function(){return f}});var n=t(1413),r=t(5987),i=(t(2791),t(9234)),o=t(1720),a=t(6139),l=t(184),c=["input"],u=["input"],d=function(e){var s=e.meta,t=s.touched,n=s.error,r=e.label,a=e.children,c=t&&n;return(0,l.jsxs)("div",{className:c?i.Z.errorField:"",children:[(0,l.jsx)("label",{className:i.Z.label,children:r}),(0,l.jsx)("div",{className:c?i.Z.Text+" "+i.Z.errorText:i.Z.Text,children:a}),c&&(0,l.jsxs)("div",{className:i.Z.warningWrap,children:[(0,l.jsx)("img",{className:i.Z.errorSignPic,src:o,alt:""}),(0,l.jsx)("span",{className:i.Z.errorSpan,children:n})]})]})},f=function(e){var s=e.input,t=(0,r.Z)(e,c);return(0,l.jsx)(d,(0,n.Z)((0,n.Z)({},e),{},{children:(0,l.jsx)("textarea",(0,n.Z)((0,n.Z)({},s),t))}))},p=function(e){var s=e.input,t=(0,r.Z)(e,u);return(0,l.jsx)(d,(0,n.Z)((0,n.Z)({},e),{},{children:(0,l.jsx)("input",(0,n.Z)((0,n.Z)({},s),t))}))};function h(e,s,t,n,r,i,o,c){var u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"",d=arguments.length>9?arguments[9]:void 0;return(0,l.jsxs)("div",{children:[(0,l.jsx)(a.Z,{name:s,label:t,component:n,type:r,placeholder:i,autoComplete:o,validate:c,rows:d})," ",u]})}},2932:function(e,s,t){t.d(s,{D:function(){return u}});var n=t(1413),r=t(5987),i=(t(2791),t(8687)),o=t(6871),a=t(184),l=["isAuth"],c=function(e){return{isAuth:e.auth.isAuth}};function u(e){return(0,i.$j)(c)((function(s){var t=s.isAuth,i=(0,r.Z)(s,l);return t?(0,a.jsx)(e,(0,n.Z)({},i)):(0,a.jsx)(o.Fg,{to:"/login"})}))}},4193:function(e,s,t){t.d(s,{C1:function(){return n},DT:function(){return r},oQ:function(){return i}});var n=function(e){if(!e)return"Required"},r=function(e){return function(s){if(s&&s.length>e)return"Max length is ".concat(e," symbols")}},i=function(e){return function(s){if(s&&s.length<e)return"Min length is ".concat(e," symbols")}}}}]);
//# sourceMappingURL=968.cc8174b9.chunk.js.map