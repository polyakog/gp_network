"use strict";(self.webpackChunkgp_project=self.webpackChunkgp_project||[]).push([[271],{4271:function(e,n,t){t.r(n),t.d(n,{ChatPage:function(){return h}});var r=t(885),s=t(2791),i=t(8687),c=t(1076),u=t(5896),l="ChatPage_buttonSend__nParV",a="ChatPage_buttonSettings__zwpTh",o=t(3504),d=t(184),h=function(){return(0,d.jsx)("div",{children:(0,d.jsx)(f,{})})},f=function(){var e=(0,i.I0)(),n=(0,i.v9)((function(e){return e.chat.status}));return(0,s.useEffect)((function(){return e((0,c.WE)()),function(){e((0,c.R7)())}}),[]),(0,d.jsxs)("div",{children:["error"===n&&(0,d.jsx)("div",{children:"Error. Please reload the page"}),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(x,{}),(0,d.jsx)(v,{})]})]})},x=function(){var e=(0,i.v9)((function(e){return e.chat.messages})),n=(0,s.useRef)(null),t=(0,s.useState)(!0),c=(0,r.Z)(t,2),u=c[0],l=c[1];return(0,s.useEffect)((function(){var e;u&&(null===(e=n.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}))}),[e]),(0,d.jsxs)("div",{style:{height:"500px",overflowY:"scroll"},onScroll:function(e){var n=e.currentTarget;Math.abs(n.scrollHeight-n.scrollTop-n.clientHeight)<300?!u&&l(!0):u&&l(!1)},children:[e.map((function(e,n){return(0,d.jsx)(j,{message:e},e.id)})),(0,d.jsx)("div",{ref:n})]})},j=s.memo((function(e){var n,t=e.message;return n=null===t.photo?u:t.photo,console.log(">>>>>>>>>Messages"),(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("img",{src:n,style:{width:"30px"},alt:"no img"}),(0,d.jsx)("b",{style:{margin:"10px",display:"inline-flex",justifySelf:"center"},children:t.userName}),(0,d.jsxs)("i",{style:{fontSize:"10px"},children:["(User Id: ",t.userId,") "]})]}),(0,d.jsx)("br",{}),t.message,(0,d.jsx)("hr",{})]})})),v=function(){var e=(0,s.useState)(""),n=(0,r.Z)(e,2),t=n[0],u=n[1],h=(0,i.I0)(),f=(0,i.v9)((function(e){return e.chat.status}));return(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{children:(0,d.jsx)("textarea",{onChange:function(e){return u(e.currentTarget.value)},value:t})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("button",{className:l,disabled:"ready"!==f,onClick:function(){t&&(h((0,c.bG)(t)),u(""))},children:"Send"}),(0,d.jsxs)(o.rU,{to:"/settings",children:[(0,d.jsx)("button",{className:a,children:"..."})," "]})]})]})}}}]);
//# sourceMappingURL=271.19d2f729.chunk.js.map